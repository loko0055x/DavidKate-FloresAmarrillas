<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>ðŸŒ» Girasol Realista en el Espacio ðŸŒŒ</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: black;
      }
      #espacio {
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0;
      }
      canvas.threejs {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <!-- Fondo con estrellas/meteoritos -->
    <canvas id="espacio"></canvas>

    <!-- Escena 3D -->
    <canvas class="threejs"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
    <script>
      // ============================
      // Fondo de estrellas
      // ============================
      const canvas = document.getElementById("espacio");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let estrellas = [];
      for (let i = 0; i < 120; i++) {
        estrellas.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 2,
          speed: Math.random() * 2 + 1,
        });
      }

      function animarEspacio() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.3)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "white";
        estrellas.forEach((e) => {
          ctx.beginPath();
          ctx.arc(e.x, e.y, e.size, 0, Math.PI * 2);
          ctx.fill();
          e.x -= e.speed;
          e.y += e.speed * 0.5;
          if (e.x < 0 || e.y > canvas.height) {
            e.x = Math.random() * canvas.width;
            e.y = -10;
          }
        });
        requestAnimationFrame(animarEspacio);
      }
      animarEspacio();

      // ============================
      // Girasol en Three.js
      // ============================
      const threeCanvas = document.querySelector(".threejs");
      const renderer = new THREE.WebGLRenderer({
        canvas: threeCanvas,
        alpha: true,
        antialias: true,
      });
      renderer.setSize(window.innerWidth, window.innerHeight);

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.z = 6;

      // Luz
      const light = new THREE.PointLight(0xffffff, 2);
      light.position.set(10, 10, 10);
      scene.add(light);
      scene.add(new THREE.AmbientLight(0x404040, 1.5));

      // Centro del girasol
      const centroGeo = new THREE.SphereGeometry(0.5, 32, 32);
      const centroMat = new THREE.MeshStandardMaterial({
        color: 0x654321,
        roughness: 0.8,
      });
      const centro = new THREE.Mesh(centroGeo, centroMat);
      scene.add(centro);

      // PÃ©talos
      const petalos = [];
      const petaloGeo = new THREE.ConeGeometry(0.15, 1, 16);
      const petaloMat = new THREE.MeshStandardMaterial({ color: 0xffd700 });
      for (let i = 0; i < 30; i++) {
        const petalo = new THREE.Mesh(petaloGeo, petaloMat);
        const angulo = (i / 30) * Math.PI * 2;
        petalo.position.set(Math.cos(angulo) * 1, Math.sin(angulo) * 1, 0);
        petalo.lookAt(0, 0, 0);
        petalo.rotation.z += Math.PI;
        scene.add(petalo);
        petalos.push(petalo);
      }

      // Tallo
      const talloGeo = new THREE.CylinderGeometry(0.1, 0.15, 3, 16);
      const talloMat = new THREE.MeshStandardMaterial({ color: 0x228b22 });
      const tallo = new THREE.Mesh(talloGeo, talloMat);
      tallo.position.y = -2;
      scene.add(tallo);

      // AnimaciÃ³n
      function animate() {
        requestAnimationFrame(animate);
        centro.rotation.y += 0.002;

        // Movimiento suave de pÃ©talos
        petalos.forEach((p, i) => {
          p.rotation.x = Math.sin(Date.now() * 0.002 + i) * 0.1;
        });

        renderer.render(scene, camera);
      }
      animate();

      // Ajustar pantalla
      window.addEventListener("resize", () => {
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
    </script>
  </body>
</html>
